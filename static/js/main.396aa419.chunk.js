(this.webpackJsonparfix=this.webpackJsonparfix||[]).push([[0],{26:function(e,t,i){},27:function(e,t,i){},29:function(e,t,i){},31:function(e,t,i){"use strict";i.r(t);var n=i(16),o=i.n(n),a=i(20),s=i.n(a),r=(i(26),i(27),i(1)),c=i(2),h=i(3),l=i(4),u=i(10),d=i.n(u),f=i(13),v=i(0),p=(i(19),function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(r.a)(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Object(c.a)(e,[{key:"start",value:function(){this.startTime=y(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"timeIntervalCheck",value:function(e){return this.getElapsedTime()>=e&&(this.elapsedTime=0,!0)}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=y();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}());function y(){return("undefined"===typeof performance?Date:performance).now()}var b=i(15),w=i(11),g=i(8),m=i(12);function k(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,a=new m.SkyMaterial("skyMaterial",e);a.backFaceCulling=!1,a.distance=o/2,a.turbidity=44,a.inclination=0,a.alpha=.5,a.alphaMode=1,a.luminance=1.1;var s=0,r=v.MeshBuilder.CreateBox("skyBox",{width:o,depth:o,height:o},e);r.material=a,r.position.y=o/3;var c=new v.StandardMaterial("farClouds",e),h=new v.Texture("/arfix/assets/textures/Skies0362_3_masked_S.png",e);c.diffuseTexture=h,c.backFaceCulling=!1,c.twoSidedLighting=!0,c.diffuseTexture.hasAlpha=!0,c.emissiveColor=new v.Color3(135/255,123/255,78/255),c.specularColor=new v.Color3(46/255,46/255,39/255);var l=new Array(6);l[0]=new v.Vector4(1,0,0,1),l[1]=new v.Vector4(1,0,0,1),l[2]=new v.Vector4(1,0,0,1),l[3]=new v.Vector4(1,0,0,1),l[4]=new v.Vector4(0,0,0,0),l[5]=new v.Vector4(0,0,0,0);var u=o/1024,d={width:1024*u+1,height:292*u+1,depth:1024*u+1,wrap:!0,faceUV:l},f=v.MeshBuilder.CreateBox("farCloudsBox",d,e);function p(){var e=w(n.position.y,[60,500],[2,0])+w(Math.abs(a.inclination),[0,.5],[0,2]);e>2&&(e=2),e<0&&(e=0),a.rayleigh=e}function y(){var e=new v.Vector3(0,0,0);return e.copyFrom(a.sunPosition),console.log("dir",e),e.normalize(),e}function b(){a.cameraOffset.y=s+n.position.y/10,a.turbidity=w(Math.abs(a.inclination),[0,.5],[44,2]),p()}function w(e,t,i){return(e-t[0])*(i[1]-i[0])/(t[1]-t[0])+i[0]}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.025,t=.48;a.inclination+=e,a.inclination>=t&&(a.inclination=t),a.inclination<=-t&&(a.inclination=-t),console.log(a.inclination,a.azimuth),b()}function k(e){}function j(){return r}return f.material=c,f.position.y=70,a.sunPosition=new v.Vector3(22628522245754007e-30,153.0733729460359,-369.5518130045147),a.useSunPosition=!1,a.sunPosition=new v.Vector3(22628522245754007e-30,153.0733729460359,-369.5518130045147),{update:k,transitionSunInclination:g,getSkyMesh:j,getLightDirection:y,convertRange:w}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=M(e,t),n=O(e,i),o=null,a=function i(){-1!==n.diffuseTexture._currentRefreshId?o=new x(t,e,n):window.setTimeout(i,10)};function s(){}function r(){return o}function c(e){}return a(),{update:s,setPosition:c,getMesh:r}}var x=function(){function e(t,i,n){Object(r.a)(this,e);var o=n.diffuseTexture.getSize().width,a=this.generateDistanceField(o,n.diffuseTexture,24,i),s=this.distortionFlow(.5,o,i),c=v.MeshBuilder.CreateGround("waterMesh",{width:t,height:t,subdivisions:4},i);c.material=new m.CustomMaterial("waterMaterial",i),c.material.backFaceCulling=!1,c.position.y=0;var h=new v.CustomProceduralTexture("waterBump","height2Normal",s._texture.baseWidth,i,!1,!0);h.wrapU=h.wrapV=1,h.setVector2("resolution",new v.Vector2(512,512)),h.setTexture("textureSampler",s),h.refreshRate=3,h.level=.5,h.vScale=20,h.uScale=20,c.material.bumpTexture=h,c.material.specularPower=60;var l=this.generateShallowWaterGradient(o,a,.9,i);c.material.diffuseTexture=l,c.material.diffuseTexture.uScale=-1,c.receiveShadows=!0}return Object(c.a)(e,[{key:"generateDistanceField",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24,n=arguments.length>3?arguments[3]:void 0,o=Date.now(),a=i.toFixed(1).toString();v.Effect.ShadersStore[o+"SdfPixelShader"]="\n        varying vec2 vUV;\n        uniform sampler2D occlusionMap;\n        uniform float res;\n        \n        bool isIn(vec2 uv)\n        {\n            //vec4 texColor = texture(occlusionMap, uv);\n            float x = step(0.99,texture(occlusionMap, uv).r); //treshold the map\n            x = 1. -x;  //reverse color\n            //vec3 color = vec3(x,x,x);\n            if (x != 1.)\n                return false;\n            else\n                return true;\n        }\n\n        float squaredDistanceBetween(vec2 uv1, vec2 uv2)\n        {\n            vec2 delta = uv1 - uv2;\n            float dist = (delta.x * delta.x) + (delta.y * delta.y);\n            return dist;\n        }\n        void main(){\n            vec2 iResolution = vec2(res);\n            const float range = ".concat(a,";\n            const int iRange = int(range);\n            float halfRange = range / 2.0;\n            vec2 startPosition = vec2(gl_FragCoord.x - halfRange, gl_FragCoord.y - halfRange);\n            bool fragIsIn = isIn(vUV);\n            float squaredDistanceToEdge = (halfRange*halfRange)*2.0;\n\n            if (!fragIsIn)\n                for(int dx=0; dx < iRange; dx++)\n                {\n                    for(int dy=0; dy < iRange; dy++)\n                    {\n                        vec2 scanPositionUV = startPosition + vec2(dx, dy);\n                        \n                        bool scanIsIn = isIn(scanPositionUV / iResolution.xy);\n                        if (scanIsIn != fragIsIn)\n                        {\n                            float scanDistance = squaredDistanceBetween(vec2(gl_FragCoord.x,gl_FragCoord.y), scanPositionUV);\n                            //float scanDistance = squaredDistanceBetween(gl_FragCoord, scanPositionUV);\n                            if (scanDistance < squaredDistanceToEdge)\n                                squaredDistanceToEdge = scanDistance;\n                        }\n                    }\n                }\n            float normalised = squaredDistanceToEdge / ((halfRange*halfRange)*2.0);\n            float distanceToEdge = sqrt(normalised);\n            if (fragIsIn)\n                distanceToEdge = -distanceToEdge ;\n            normalised = 0.5 - distanceToEdge;\n\n            gl_FragColor = vec4(normalised, normalised, normalised, 1.0);\n            /*float x = step(0.99,texture2D(occlusionMap, vUV).r); //treshold the map\n            x = 1. -x;  //reverse color\n            vec3 color = vec3(x,x,x);*/\n\n            //vec3 color = vec3(0.,1.,0.);\n            //gl_FragColor = vec4(color, 1.0);\n\n        }\n        ");var s=new v.CustomProceduralTexture(o+"SdfDt",o+"Sdf",e,n,!1,!1);return s.refreshRate=0,s.setTexture("occlusionMap",t,n),s.setFloat("res",e),s}},{key:"generateShallowWaterGradient",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=arguments.length>3?arguments[3]:void 0,o=Date.now(),a=new v.Color3(.13,.27,.57),s=new v.Color3(.02,.72,.77),r=i.toFixed(1).toString();v.Effect.ShadersStore[o+"ShallowWaterPixelShader"]="\n        varying vec2 vUV;\n        uniform sampler2D depthField;\n        uniform float res;\n        uniform vec3 deep;\n        uniform vec3 shallow;\n        void main(){\n            vec2 iResolution = vec2(res);\n            float depth = smoothstep(0.,".concat(r,",texture(depthField, vUV).r);\n            vec3 gradient = mix(deep,shallow, depth);\n            gl_FragColor = vec4(gradient,1.0);\n        }\n        ");var c=new v.CustomProceduralTexture(o+"ShallowWaterDt",o+"ShallowWater",e,n,!1,!1);return c.refreshRate=0,c.setTexture("depthField",t,n),c.setFloat("res",e),c.setColor3("deep",a),c.setColor3("shallow",s),c}},{key:"distortionFlow",value:function(e,t,i){var n=Date.now(),o=e.toFixed(1).toString();v.Effect.ShadersStore[n+"DistortionFlowPixelShader"]="\n        varying vec2 vUV;\n        uniform sampler2D textureSampler;\n        //uniform sampler2D flowMap;\n        uniform float uTime;\n\n        vec2 flowUV (vec2 uv, float time) {\n            return uv + time;\n        }\n        //https://www.shadertoy.com/view/MtfBRN\n        void main(){\n            vec2 uv = vec2(vUV.x,-vUV.y);\n            float intensity = ".concat(o,";\n            float timescale = uTime *.0174;\n            //vec2 distortion = (texture2D(flowMap, -uv).rg -1.3) * intensity;\n            float flow_t0 = fract(timescale);\n            float flow_t1 = fract(timescale + .5);\n            float alternate = abs((flow_t0 -.5) * 10.);\n\n            vec4 samp0 = texture2D(textureSampler, uv + flow_t0); \n            vec4 samp1 = texture2D(textureSampler, uv - flow_t1); \n            vec4 Flow = mix(samp0, samp1, alternate);\n            gl_FragColor = vec4(1.,Flow.g,1.,1.);\n        }\n        ");var a=new v.CustomProceduralTexture(n+"DistortionFlowDt",n+"DistortionFlow",t||256,i,!1,!1);a.wrapU=a.wrapV=1,a.refreshRate=3,a.onGeneratedObservable.add((function(){a.setFloat("uTime",a._time)})),a.setFloat("uTime",0);var s=new v.Texture("https://raw.githubusercontent.com/kristosb/assets/main/WavesDt.png");return a.setTexture("textureSampler",s),a.uScale=1,a.vScale=1,a}},{key:"scene",get:function(){return this.params.scene}},{key:"res",get:function(){return this.params.res}}]),e}();function M(e,t){var i=new v.FreeCamera("camWaterMask",new v.Vector3(0,-10,0),e);i.setTarget(v.Vector3.Zero());var n=t/2;return i.mode=v.Camera.ORTHOGRAPHIC_CAMERA,i.orthoTop=n,i.orthoBottom=-n,i.orthoLeft=-n,i.orthoRight=n,i.minZ=8,i.maxZ=15,i}function O(e,t){var i=e.enableDepthRenderer(t).getDepthMap();i.scale(.2);i.getSize();i._refreshRate=0;var n=new v.StandardMaterial("waterOcclMask",e);return n.diffuseTexture=i,n.specularColor.copyFromFloats(0,0,0),t.dispose(),n}function T(e){var t=function(e,t){e.position=new v.Vector3(0,150,0);var i=new v.CascadedShadowGenerator(1024,e);return i.forceBackFacesOnly=!0,i.filteringQuality=v.ShadowGenerator.QUALITY_MEDIUM,i.lambda=1,i.shadowMaxZ=500,i.cascadeBlendPercentage=0,i.depthClamp=!1,i.splitFrustum(),i}(e);return{updateOnce:function(){},addMesh:function(e){t.getShadowMap().renderList.push(e)}}}v.Effect.ShadersStore.height2NormalPixelShader="varying vec2 vUV;\nuniform vec2 resolution;\nuniform sampler2D textureSampler;\n\nvoid main(){\n    vec2 unit = vec2(1.0)/resolution*2.;\n    float x = ((texture2D(textureSampler, vUV+(unit*vec2(-1.,0.))).g-texture2D(textureSampler, vUV+(unit*vec2(1.,0.))).g)+1.)*0.5;\n    float y = ((texture2D(textureSampler, vUV+(unit*vec2(0.,1.))).g-texture2D(textureSampler, vUV+(unit*vec2(0.,-1.))).g)+1.)*0.5;\n    float a = 1.;//texture(textureSampler, vUV).r;\n\n#if defined(invertDepth)\n    \tgl_FragColor = vec4(x, y, 1.0, a);\n#else\n\tgl_FragColor = vec4(1.0-x, y, 1.0, a);\n#endif\n\n}";var _=i(7),S=function(){function e(t,i,n){Object(r.a)(this,e),n=n||{};var o=new v.Vector3(260,4,350);this.vehicleMesh=v.MeshBuilder.CreateBox("yukaMeshShip",{width:12,height:3,depth:54},t),this.vehicleMesh.material=new m.GridMaterial("groundMaterial",t),this.vehicleMesh.position.copyFrom(o),this.vehicleMesh.position.z+=14,this.vehicleMesh.position.x-=4.3,this.vehicleMesh.physicsImpostor=new v.PhysicsImpostor(this.vehicleMesh,v.PhysicsImpostor.BoxImpostor,{mass:1e5,friction:1,restitution:.9},t),this.vehicleMesh.isVisible=!1,this.entityManager=new _.c,this.time=new _.o,this.vehicle=new _.q,this.vehicle.maxSpeed=1,this.vehicle.mass=.1;var a=new _.j;a.loop=!0,a.add(new _.p(290,0,340)),a.add(new _.p(100,0,350)),a.add(new _.p(0,0,300)),a.add(new _.p(20,0,180)),a.add(new _.p(140,0,140)),a.add(new _.p(300,0,200)),this.vehicle.position.copy(a.current()),this.vehicle.active=!1;var s=new _.e(a,20);(this.vehicle.steering.add(s),this.onPathBehavior=new _.i(a),this.vehicle.steering.add(this.onPathBehavior),this.entityManager.add(this.vehicle),a._waypoints.push(a._waypoints[0]),n.debug)&&(v.MeshBuilder.CreateLines("lines",{points:a._waypoints,updatable:!0}).color=v.Color3.Teal());this.onPathBehavior.active=!1,this.entityManager.update(this.time.update().getDelta()),i.position.copyFrom(o),i.position.y+=3.37,this.vehicleMesh.addChild(i),this.vehicleMesh.rotate(new v.Vector3.Up,-Math.PI/2),this.altOffset=new v.Vector3(0,-2.3,0),this.vehicle.rotation=new _.k(this.vehicleMesh.rotationQuaternion.x,this.vehicleMesh.rotationQuaternion.y,this.vehicleMesh.rotationQuaternion.z,this.vehicleMesh.rotationQuaternion.w)}return Object(c.a)(e,[{key:"update",value:function(){var e=this.time.update().getDelta();this.entityManager.update(e);var t=-(this.vehicleMesh.position.y+this.altOffset.y),i=new v.Vector3(this.vehicle.velocity.x,t,this.vehicle.velocity.z);this.vehicleMesh.physicsImpostor.setLinearVelocity(i),this.vehicleMesh.physicsImpostor.physicsBody.angularVelocity=new g.Vec3(0,0,0);var n=new g.Quaternion(this.vehicle.rotation.x,this.vehicle.rotation.y,this.vehicle.rotation.z,this.vehicle.rotation.w),o=(new g.Vec3,n.conjugate().mult(this.vehicleMesh.physicsImpostor.physicsBody.quaternion)),a=new g.Vec3;o.toEuler(a),this.vehicleMesh.physicsImpostor.physicsBody.angularVelocity=new g.Vec3(0,-a.y/10,0)}},{key:"pause",get:function(){return this.vehicle.active},set:function(e){this.vehicle.active=e}}]),e}(),I=function(){function e(t,i,n){Object(r.a)(this,e),n=n||{};var o=new v.Vector3(-100,100,-100),a=new v.Vector3(140,50,190).addInPlace(o);this.vehicleMesh=v.MeshBuilder.CreateBox("yukaMeshAirship",{width:12,height:10,depth:64},t),this.vehicleMesh.material=new m.GridMaterial("groundMaterialAirship",t),this.vehicleMesh.position.copyFrom(a),this.vehicleMesh.position.z+=-1,this.vehicleMesh.physicsImpostor=new v.PhysicsImpostor(this.vehicleMesh,v.PhysicsImpostor.BoxImpostor,{mass:1e5,friction:1,restitution:.9},t),this.vehicleMesh.isVisible=n.debug,this.entityManager=new _.c,this.time=new _.o,this.vehicle=new _.q,this.vehicle.maxSpeed=2,this.vehicle.mass=.1;var s=new _.j;s.loop=!0;var c=new _.p(o.x,o.y,o.z);s.add(new _.p(140,80,190).add(c)),s.add(new _.p(-50,130,200).add(c)),s.add(new _.p(-50,180,150).add(c)),s.add(new _.p(-30,130,30).add(c)),s.add(new _.p(-10,130,-10).add(c)),s.add(new _.p(150,100,50).add(c)),this.vehicle.position.copy(s.current()),this.vehicle.active=!1;var h=new _.e(s,20);(this.vehicle.steering.add(h),this.onPathBehavior=new _.i(s),this.vehicle.steering.add(this.onPathBehavior),this.entityManager.add(this.vehicle),s._waypoints.push(s._waypoints[0]),n.debug)&&(v.MeshBuilder.CreateLines("lines",{points:s._waypoints,updatable:!0}).color=v.Color3.Teal());this.onPathBehavior.active=!1,this.entityManager.update(this.time.update().getDelta()),i.scaling=new v.Vector3(7,7,7),i.position.copyFrom(a),i.position.y+=-20.6,i.rotate(new v.Vector3.Up,-Math.PI),this.vehicleMesh.addChild(i),this.vehicleMesh.rotate(new v.Vector3.Up,-Math.PI/2),this.altOffset=new v.Vector3(0,0,0),this.vehicle.rotation=new _.k(this.vehicleMesh.rotationQuaternion.x,this.vehicleMesh.rotationQuaternion.y,this.vehicleMesh.rotationQuaternion.z,this.vehicleMesh.rotationQuaternion.w)}return Object(c.a)(e,[{key:"update",value:function(){var e=this.time.update().getDelta();this.entityManager.update(e);var t=-(this.vehicleMesh.position.y-this.vehicle.position.y+this.altOffset.y),i=new v.Vector3(this.vehicle.velocity.x,t,this.vehicle.velocity.z);this.vehicleMesh.physicsImpostor.setLinearVelocity(i),this.vehicleMesh.physicsImpostor.physicsBody.angularVelocity=new g.Vec3(0,0,0);var n=new g.Quaternion(this.vehicle.rotation.x,this.vehicle.rotation.y,this.vehicle.rotation.z,this.vehicle.rotation.w),o=(new g.Vec3,n.conjugate().mult(this.vehicleMesh.physicsImpostor.physicsBody.quaternion)),a=new g.Vec3;o.toEuler(a),this.vehicleMesh.physicsImpostor.physicsBody.angularVelocity=new g.Vec3(0,-a.y/10,0)}},{key:"pause",get:function(){return this.vehicle.active},set:function(e){this.vehicle.active=e}}]),e}(),V=i(6),R=i(5),C=new _.h,E=new _.p,P=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),n=t.call(this),console.log("Limit Box"),n.limitBox=e,n.brakingWeight=.2,n.dBoxMinLength=4,n}return Object(c.a)(i,[{key:"calculate",value:function(e,t){var i=this.limitBox;e.worldMatrix.getInverse(C);this.dBoxMinLength,e.getSpeed(),e.maxSpeed,this.dBoxMinLength;if(E.copy(i.position).applyMatrix4(C),E.z<0){var n=i.boundingRadius-E.length();if(n<0){var o=20*-n;t.x=E.x*o,t.y=E.y*o/10,t.z=-10*o,t.applyRotation(e.rotation)}}var a=6*(1.5+e.rotation.toEuler(new _.p).x/(Math.PI/4));return e.maxSpeed=a,t}},{key:"toJSON",value:function(){var e=Object(V.a)(Object(R.a)(i.prototype),"toJSON",this).call(this);return e.brakingWeight=this.brakingWeight,e.dBoxMinLength=this.dBoxMinLength,e}},{key:"fromJSON",value:function(e){return Object(V.a)(Object(R.a)(i.prototype),"fromJSON",this).call(this,e),this.brakingWeight=e.brakingWeight,this.dBoxMinLength=e.dBoxMinLength,this}}]),i}(_.n),L=function(){function e(t,i,n){var o=this;Object(r.a)(this,e),n=n||{},this.entityMatrix=new v.Matrix,this.entityManager=new _.c,this.time=new _.o;var a,s=new v.Vector3(150,35,240);a=function(e,t,i,n){var o=v.MeshBuilder.CreateBox("limitBox",{size:t},e),a=new v.StandardMaterial("meshMat",e);a.disableLighting=!0,a.emissiveColor=v.Color3.Red(),a.wireframe=!0,o.material=a,o.position.copyFrom(i),o.visibility=n;var s=new _.f;return s.position.copy(o.position),s.boundingRadius=1*o.getBoundingInfo().boundingSphere.radius,s}(t,100,new v.Vector3(s.x,s.y+50,s.z),n.debug),this.entityManager.add(a);var c=new _.a,h=new _.b,l=new _.l;c.weight=1.9,h.weight=2.5,l.weight=.15,this.enemy=new _.p,i.forEach((function(e){var t=e;t.position.copyFrom(s);var i=new _.q;i.maxSpeed=10,i.updateNeighborhood=!0,i.neighborhoodRadius=30,i.setRenderComponent(t,D),i.boundingRadius=t.getBoundingInfo().boundingSphere.radius,i.smoother=new _.m(20),i.position=new _.p(s.x,s.y,s.z),i.position.x=i.position.x-5*Math.random(),i.position.z=i.position.z-5*Math.random(),i.active=!1,i.steering.add(c),i.steering.add(h),i.steering.add(l);var n=new _.r(1,5,5);n.weight=1.2,i.steering.add(n);var r=new P(a);i.steering.add(r);var u=new _.d(o.enemy,5);u.weight=5,i.steering.add(u),o.entityManager.add(i)}))}return Object(c.a)(e,[{key:"update",value:function(){var e=this.time.update().getDelta();this.entityManager.update(e)}},{key:"pause",get:function(){return!1},set:function(e){this.entityManager.entities.forEach((function(t){return t.active=e}))}},{key:"enemyPosition",set:function(e){this.enemy.copy(new _.p(e.x,e.y,e.z))}}]),e}();function D(e,t){t.position=new v.Vector3(e.position.x,e.position.y,e.position.z),t.rotationQuaternion=new v.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)}_.r.prototype.calculate=function(e,t,i){var n=new _.p,o=this.jitter*i,a=new _.p;return a.x=_.g.randFloat(-1,1)*o,a.y=_.g.randFloat(-1,1)*o/10,a.z=_.g.randFloat(-1,1)*o,this._targetLocal.add(a),this._targetLocal.normalize(),this._targetLocal.multiplyScalar(this.radius),n.copy(this._targetLocal),n.z+=this.distance,n.applyMatrix4(e.worldMatrix),t.subVectors(n,e.position),t};var F=i(21);var B=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o,a){var s;Object(r.a)(this,i),s=t.call(this,e),n||console.error("airplane modlel mesh error");n[0].translate(new v.Vector3.Up,.15,v.Space.WORLD),n[0].scaling=n[0].scaling.multiplyByFloats(1,1,1);var c=new v.Vector3(0,.2,.65).multiplyByFloats(1,1,1),h={suspensionStiffness:47,suspensionDamping:.3,suspensionCompression:4.4,suspensionRestLength:.3,rollInfluence:.01},l=Object(F.a)({},h);l.suspensionRestLength=.27,s.wheelsMesh=[n[18],n[19],n[20]],s.wheelsMesh.forEach((function(e){return n[0].removeChild(e)})),n[0].translate(new v.Vector3.Up,.75,v.Space.WORLD);var u=.1125;s.wheels=[{pos:s.wheelsMesh[0].position,radius:u,isFront:!0,params:h},{pos:s.wheelsMesh[1].position,radius:u,isFront:!0,params:h},{pos:s.wheelsMesh[2].position,radius:.05625,isFront:!1,params:l}],s.wheels.forEach((function(e){return e.pos.addInPlace(c)}));var d=function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new v.Color3(.5,.6,.87),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"box",s=v.MeshBuilder.CreateBox(a,{width:t.x,depth:t.y,height:t.z},e);s.rotationQuaternion=n,s.position=i;var r=new v.StandardMaterial("vehicleMassBox",e);return r.diffuseColor=new v.Color3(1,0,1),r.specularColor=o,r.emissiveColor=o,s.material=r,s}(e,new v.Vector3(2,2,.6).multiplyByFloats(1,1,1),new v.Vector3(0,1,0).subtractInPlace(c),new v.Vector3(0,0,0).toQuaternion(),new v.Color3(.1,.1,.1),"chassis");d.isVisible=!1,n[0].removeChild(n[11]),s.visualMeshes=[n[11]],s.visualMeshes.forEach((function(e){d.addChild(e)})),s.visualMeshes[0].receiveShadows=!0,s.visualMeshes[0].material.freeze(),s.controls={rotor:n[17],rudder:n[16],leftAileron:n[12],rightAileron:n[13],leftElevator:n[15],rightElevator:n[14]},Object.values(s.controls).forEach((function(e){n[0].removeChild(e),d.addChild(e)})),s.chassisBody=s.createBody(50,new v.Vector3(1,.3,1),new v.Vector3(0,.1,-.2)),s.powerWheelsIndex=[0,1],s.steeringWheelsIndex=[2],s.brakeWheelsIndex=[0,1,2],s.chassisMesh=d,n[0].dispose();var f=s.scene.getPhysicsEngine().getPhysicsPlugin().world;s.chassisBody.position=new g.Vec3(o.x,o.y,o.z);var p=a.toQuaternion();s.chassisBody.quaternion=new g.Quaternion(p.x,p.y,p.z,p.w),f.addBody(s.chassisBody);var y=Object(w.a)(s);return s.scene.registerBeforeRender((function(){y.chassisMesh.position.copyFrom(new v.Vector3(y.chassisBody.position.x,y.chassisBody.position.y,y.chassisBody.position.z)),y.chassisMesh.rotationQuaternion=new v.Quaternion(y.chassisBody.quaternion.x,y.chassisBody.quaternion.y,y.chassisBody.quaternion.z,y.chassisBody.quaternion.w)})),s}return Object(c.a)(i,[{key:"collidersCreate",value:function(e,t,i,n,o){var a=this,s=i;s.forEach((function(t){return e.removeChild(t)})),s.forEach((function(e){t.addChild(e),e.isVisible=o})),s.forEach((function(e){!function(e,t,i,n,o){if(null==t)return;t.checkCollisions=!1;var a=t.parent;!0===o&&(t.parent=null);t.physicsImpostor=new v.PhysicsImpostor(t,i,n,e),!0===o&&(t.parent=a)}(a.scene,e,n,{mass:0,friction:1,restitution:.1},!0)}))}},{key:"createBody",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=new g.Material("Mat");o.friction=.8,e=new g.Box(new g.Vec3(i.x,i.y,i.z));var a=new g.Body({mass:t});return a.material=o,a.addShape(e,new g.Vec3(n.x,n.y,n.z)),a.angularDamping=.8,a}}]),i}(function(){function e(t){Object(r.a)(this,e),this._scene=t,this._chassisMesh=null,this._wheelsMesh=[],this._powerWheelsIndex=[],this._steeringWheelsIndex=[],this._brakeWheelsIndex=[]}return Object(c.a)(e,[{key:"scene",get:function(){return this._scene},set:function(e){this._scene=e}},{key:"chassisMesh",get:function(){return this._chassisMesh},set:function(e){this._chassisMesh=e}},{key:"wheelsMesh",get:function(){return this._wheelsMesh},set:function(e){this._wheelsMesh=e}},{key:"powerWheelsIndex",get:function(){return this._powerWheelsIndex},set:function(e){this._powerWheelsIndex=e}},{key:"steeringWheelsIndex",get:function(){return this._steeringWheelsIndex},set:function(e){this._steeringWheelsIndex=e}},{key:"brakeWheelsIndex",get:function(){return this._brakeWheelsIndex},set:function(e){this._brakeWheelsIndex=e}}]),e}());v.Mesh.prototype.getAbsoluteSize=function(){this.__size||(this.__size=v.Vector3.Zero());var e=this.scaling,t=this.getBoundingInfo();return this.__size.x=Math.abs(t.minimum.x-t.maximum.x)*e.x,this.__size.z=Math.abs(t.minimum.y-t.maximum.y)*e.y,this.__size.y=Math.abs(t.minimum.z-t.maximum.z)*e.z,this.__size};var z=i(9);var A=function(){function e(t,i,n){Object(r.a)(this,e),this.bm=t,this._x=i,this._y=n,this.lineWidth=this.bm.lineWidth,this.globalLineWidth=this.bm.lineWidth,this._fontSize=12}return Object(c.a)(e,[{key:"lineWidth",get:function(){return this.localLineWidth},set:function(e){this.localLineWidth=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize=e}},{key:"changeLocalLineWidth",value:function(){this.globalLineWidth=this.bm.lineWidth,this.bm.lineWidth=this.localLineWidth}},{key:"resetGlobalLineWidth",value:function(){this.bm.lineWidth=this.globalLineWidth}},{key:"draw",value:function(){}}]),e}(),W=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o,a){var s;return Object(r.a)(this,i),(s=t.call(this,e,n,o)).txt="hello...",s.fontSize=a,s}return Object(c.a)(i,[{key:"text",set:function(e){this.txt=e}},{key:"draw",value:function(){this.bm.font="bold ".concat(this.fontSize,"px Arial"),this.bm.textAlign="start",this.bm.fillText(this.txt,this.x,this.y)}}]),i}(A);function H(e,t,i){return Array(t/i-e/i+1).fill().map((function(t,n){return e+n*i}))}function U(e){return e<0&&(e+=360),e>359&&(e-=360),e}function Q(e){return e<-90&&(e=-180-e),e>90&&(e=180-e),e}function G(e,t){return e.map((function(e){return t(e)}))}var q=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;return Object(r.a)(this,i),(a=t.call(this,e,n/2-s*(c/2),o/6)).tickSpace=s,a._range=c,a.middle=n/2,a.width=n,a.height=o,a.tilt=0,a.tickHeight=15,a.scale=10,a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a}return Object(c.a)(i,[{key:"angle",get:function(){return this.tilt},set:function(e){this.tilt=e}},{key:"range",set:function(e){this._range=e}},{key:"rangeScale",set:function(e){this.scale=e}},{key:"draw",value:function(){var e=this;this.x=Math.floor(this.x)+.5,this.y=Math.floor(this.y)+.5;var t=Math.floor(this.tilt),n=Math.floor(10*this.tilt/this.scale)%10,o=Math.floor(10*(this.tilt/this.scale+.5))%10;this.scaleVals=H(Math.floor(this.tilt/this.scale)*this.scale-Math.floor(this.scale*this._range/2),Math.floor(this.tilt/this.scale)*this.scale+Math.floor(this.scale*this._range/2),this.scale),this.scaleVals=G(this.scaleVals,U),this.tilt=t+n/10,Object(V.a)(Object(R.a)(i.prototype),"changeLocalLineWidth",this).call(this),this.bm.beginPath();var a=this.x-n*this.tickSpace/10,s=this.x-o*this.tickSpace/10;this.scaleVals.forEach((function(t,i){e.bm.font="bold ".concat(e.fontSize,"px Arial"),e.bm.textAlign="start",e.bm.fillText(t.toString(),a-5,e.y-e.tickHeight-2),e.bm.moveTo(a,e.y),e.bm.lineTo(a,e.y-e.tickHeight),e.bm.moveTo(s,e.y),e.bm.lineTo(s,e.y-e.tickHeight/2),a+=e.tickSpace,s+=e.tickSpace})),this.bm.moveTo(this.middle,this.y+this.tickHeight),this.bm.lineTo(this.middle,this.y),this.bm.fillText(t.toString(),this.middle+4,this.y+this.tickHeight),this.bm.closePath(),this.bm.stroke(),Object(V.a)(Object(R.a)(i.prototype),"resetGlobalLineWidth",this).call(this)}}]),i}(A),N=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a;return Object(r.a)(this,i),(a=t.call(this,e,0,0)).width=n,a.height=o,a.middle=n/2,a.tilt=0,a.rot=0,a.tickHeight=100,a.tickSpace=40,a.scale=10,a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5,a._range=4,a.middleOffset=o-(o-a.tickSpace*a._range)/2+a.tickSpace,a}return Object(c.a)(i,[{key:"angle",set:function(e){this.tilt=e}},{key:"rotation",set:function(e){this.rot=e}},{key:"range",set:function(e){this._range=e}},{key:"rangeScale",set:function(e){this.scale=e}},{key:"draw",value:function(){var e=this;this.bm.save(),this.bm.translate(this.width/2,this.height/2),this.bm.rotate(Math.PI/180*this.rot),this.bm.translate(-this.width/2,-this.height/2);var t=Math.floor(this.tilt),n=Math.floor(10*this.tilt/this.scale)%10;this.scaleVals=H(Math.floor(this.tilt/this.scale)*this.scale-Math.floor(this.scale*this._range/2),Math.floor(this.tilt/this.scale)*this.scale+Math.floor(this.scale*this._range/2),this.scale),this.scaleVals=G(this.scaleVals,Q),this.tilt=t+n/10;var o=0;o=n>=0?this.middleOffset+n*this.tickSpace/10:this.middleOffset+(10*this.tickSpace/10+n*this.tickSpace/10),Object(V.a)(Object(R.a)(i.prototype),"changeLocalLineWidth",this).call(this),this.scaleVals.forEach((function(t,i){e.bm.beginPath(),e.bm.font="bold ".concat(e.fontSize,"px Arial"),e.bm.textAlign="start";var n=1;t<0&&(e.bm.setLineDash([3*e.tickHeight/100,2*e.tickHeight/100]),n=-1),0!=t?(e.bm.moveTo(e.middle-e.tickHeight/2-e.lineWidth/2,o),e.bm.lineTo(e.middle-.3*e.tickHeight,o),e.bm.moveTo(e.middle+.3*e.tickHeight,o),e.bm.lineTo(e.middle+e.tickHeight/2+e.lineWidth/2,o),e.bm.moveTo(e.middle-e.tickHeight/2,o),e.bm.lineTo(e.middle-e.tickHeight/2,o+e.tickSpace/4*n),e.bm.moveTo(e.middle+e.tickHeight/2,o),e.bm.lineTo(e.middle+e.tickHeight/2,o+e.tickSpace/4*n),e.bm.fillText(t.toString(),e.middle-e.tickHeight/2-130+20*n,o+35-1*n)):(e.bm.moveTo(e.middle-.8*e.tickHeight,o),e.bm.lineTo(e.middle-.3*e.tickHeight,o),e.bm.moveTo(e.middle+.3*e.tickHeight,o),e.bm.lineTo(e.middle+.8*e.tickHeight,o)),o-=e.tickSpace,e.bm.closePath(),e.bm.stroke(),e.bm.setLineDash([])})),Object(V.a)(Object(R.a)(i.prototype),"resetGlobalLineWidth",this).call(this),this.bm.restore()}}]),i}(A);function Z(e,t){t.width,t.height;var i,n=0,o=.05,a=new v.Vector3(0,0,0),s=0,r=0,c=0,h="rgba(\n        ".concat(163,",\n        ",255,",\n        ",0,",\n        ",255);window.drawCanvas=document.createElement("canvas"),window.drawCanvas.width=768,window.drawCanvas.height=768;var l=window.drawCanvas.getContext("2d");l.fillStyle=h,l.strokeStyle=h,l.lineWidth=5;var u={compass:new q(l,window.drawCanvas.width,window.drawCanvas.height,200,2),pitchLader:new N(l,window.drawCanvas.width,window.drawCanvas.height),speed:new W(l,0,window.drawCanvas.height-20,90),power:new W(l,0,window.drawCanvas.height-90,75),altitude:new W(l,window.drawCanvas.width-230,window.drawCanvas.height-20,90)};u.compass.tickHeight=60,u.compass.lineWidth=14,u.compass.fontSize=90,u.compass.angle=30,u.pitchLader.tickHeight=300,u.pitchLader.tickSpace=120,u.pitchLader.lineWidth=14,u.pitchLader.fontSize=90,u.pitchLader.range=2,Object.values(u).forEach((function(e){}));var d=new v.HtmlElementTexture("",window.drawCanvas,{scene:e}),f=new v.StandardMaterial("groundMat",e);f.emissiveTexture=d,f.disableLighting=!0,f.diffuseTexture=d,f.diffuseTexture.hasAlpha=!0,f.backFaceCulling=!1;var p=v.MeshBuilder.CreatePlane("hudPlane",{size:1.6});function y(){l.clearRect(0,0,window.drawCanvas.width,window.drawCanvas.height),u.speed.text=s,u.altitude.text=r,u.power.text=c,u.compass.angle=a.x,u.pitchLader.angle=a.y,u.pitchLader.rot=a.z,Object.values(u).forEach((function(e){e.draw()})),d.update()}function b(e){e.addChild(p),p.position=new v.Vector3(0,.8,0)}function w(e){p.parent=e}function g(e){e.lockedTarget=p}function m(e){a.copyFrom(e)}function k(e){s=(10*e).toFixed(1)}function j(e){r=e.toFixed(1)}function x(e){e>.99&&(e=.99),c=(100*e).toFixed(0)}function M(e){(i=e)-n>o&&(y(),n=i)}return p.material=f,d.update(),{update:M,draw:y,linkWithMesh:b,linkWithCamera:w,lockToCamera:g,setRotation:m,setSpeed:k,setAltitude:j,setPower:x}}var K=function(e,t){var i=new v.Vector3,n=e.x,o=e.y,a=e.z,s=t.x,r=t.y,c=t.z,h=t.w,l=h*n+r*a-c*o,u=h*o+c*n-s*a,d=h*a+s*o-r*n,f=-s*n-r*o-c*a;return i.x=l*h+f*-s+u*-c-d*-r,i.y=u*h+f*-r+d*-s-l*-c,i.z=d*h+f*-c+l*-r-u*-s,i},J=function(e,t,i){i.applyLocalForce(new g.Vec3(e.x,e.y,e.z),new g.Vec3(t.x,t.y,t.z))},Y=function(){function e(t,i,n){Object(r.a)(this,e),this.scene=t,i||console.error("chassis mesh error"),n||console.error("controls data error"),this._lift=50,this._roll=0,this._rollLimit=2,this._yaw=0,this._yawLimit=2,this._pitch=0,this._pitchLimit=2,this._velocity=0,this._currentSpeed=0,this._enginePower=0,this._enginePowerLimit=1,this.enginePowerPrev=0,this.speedModifier=.03,this.collision=i,this.rudder=n.rudder,this.rotor=n.rotor,this.leftAileron=n.leftAileron,this.rightAileron=n.rightAileron,this.leftElevator=n.leftElevator,this.rightElevator=n.rightElevator,this._relativeBody=null,this._isTouchingGround=!1,this.addAnimations(),this.animationGroup.play(!1),this.animationGroup.speedRatio=1,this.controlsInitialize(),this.registerForces()}return Object(c.a)(e,[{key:"lift",get:function(){return this._lift},set:function(e){this._lift=e}},{key:"roll",get:function(){return this._roll},set:function(e){e>this._rollLimit&&(e=this._rollLimit),e<-this._rollLimit&&(e=-this._rollLimit),this._roll=e}},{key:"yaw",get:function(){return this._yaw},set:function(e){e>this._yawLimit&&(e=this._yawLimit),e<-this._yawLimit&&(e=-this._yawLimit),this._yaw=e}},{key:"pitch",get:function(){return this._pitch},set:function(e){e>this._pitchLimit&&(e=this._pitchLimit),e<-this._pitchLimit&&(e=-this._pitchLimit),this._pitch=e}},{key:"enginePower",get:function(){return this._enginePower},set:function(e){e>this._enginePowerLimit&&(e=this._enginePowerLimit),e<0&&(e=0),this._enginePower=e}},{key:"velocity",get:function(){return K(new v.Vector3(this.collision.velocity.x,this.collision.velocity.y,this.collision.velocity.z),v.Quaternion.Inverse(new v.Quaternion(this.collision.quaternion.x,this.collision.quaternion.y,this.collision.quaternion.z,this.collision.quaternion.w)))}},{key:"currentSpeed",get:function(){return 0}},{key:"rotation",get:function(){return new v.Quaternion(this.collision.quaternion.x,this.collision.quaternion.y,this.collision.quaternion.z,this.collision.quaternion.w).toEulerAngles()}},{key:"relativeBody",get:function(){return this._relativeBody},set:function(e){this._relativeBody=e}},{key:"isTouchingGround",get:function(){return this._isTouchingGround},set:function(e){this._isTouchingGround=e}},{key:"rotorSpin",value:function(e){e.rotation=new v.Vector3(0,0,Math.PI/2);var t=new v.Animation("wheelAnimation","rotation.z",15,v.Animation.ANIMATIONTYPE_FLOAT,v.Animation.ANIMATIONLOOPMODE_CYCLE);this.animationGroup=new v.AnimationGroup("airplane");var i=[];i.push({frame:0,value:0}),i.push({frame:15,value:-2*Math.PI*1}),t.setKeys(i),e.animations=[],e.animations.push(t),this.animationGroup.addTargetedAnimation(t,e)}},{key:"addAnimations",value:function(){this.rotorSpin(this.rotor)}},{key:"controlsInitialize",value:function(){this.rudderZeroRotation=new v.Quaternion,this.leftAileronZeroRotation=new v.Quaternion,this.rightAileronZeroRotation=new v.Quaternion,this.leftElevatorZeroRotation=new v.Quaternion,this.rightElevatorZeroRotation=new v.Quaternion,this.rudderZeroRotation.copyFrom(this.rudder.rotationQuaternion),this.leftAileronZeroRotation.copyFrom(this.leftAileron.rotationQuaternion),this.rightAileronZeroRotation.copyFrom(this.rightAileron.rotationQuaternion),this.leftElevatorZeroRotation.copyFrom(this.leftElevator.rotationQuaternion),this.rightElevatorZeroRotation.copyFrom(this.rightElevator.rotationQuaternion)}},{key:"meshRootPosition",value:function(e,t,i){this.collision.position.set(e,t,i)}},{key:"rudderControl",value:function(e){this.rudder.rotationQuaternion.copyFrom(this.rudderZeroRotation),this.rudder.rotate(v.Vector3.Up(),e)}},{key:"aileronControl",value:function(e){this.leftAileron.rotationQuaternion.copyFrom(this.leftAileronZeroRotation),this.leftAileron.rotate(v.Vector3.Left(),e),this.rightAileron.rotationQuaternion.copyFrom(this.rightAileronZeroRotation),this.rightAileron.rotate(v.Vector3.Left(),-e)}},{key:"elevatorControl",value:function(e){this.leftElevator.rotationQuaternion.copyFrom(this.leftElevatorZeroRotation),this.leftElevator.rotate(v.Vector3.Left(),e),this.rightElevator.rotationQuaternion.copyFrom(this.rightElevatorZeroRotation),this.rightElevator.rotate(v.Vector3.Left(),e)}},{key:"applyLiftForce",value:function(){var e=this.velocity.z*Math.abs(this.velocity.z)*1.5;J(new v.Vector3(0,e,0),new v.Vector3(0,0,0),this.collision)}},{key:"applyDragForce",value:function(){var e=this.velocity;J(new v.Vector3(e.x*Math.abs(e.x)*-20,e.y*Math.abs(e.y)*-100,e.z*Math.abs(e.z)*-1),new v.Vector3(0,0,-.02),this.collision)}},{key:"applyThrustForce",value:function(){J(new v.Vector3(0,0,3e3*this.speedModifier*this.enginePower),new v.Vector3(0,0,1),this.collision)}},{key:"applyRollForce",value:function(e){e&&(J(new v.Vector3(0,5*e*-this.velocity.z,0),new v.Vector3(1,0,0),this.collision),J(new v.Vector3(0,5*e*this.velocity.z,0),new v.Vector3(-1,0,0),this.collision))}},{key:"applyYawForce",value:function(e){e&&J(new v.Vector3(5*e*this.velocity.z,0,0),new v.Vector3(0,0,-1),this.collision)}},{key:"applyPitchForce",value:function(e){e&&J(new v.Vector3(0,5*e*this.velocity.z,0),new v.Vector3(0,0,-1),this.collision)}},{key:"applyPitchYawForce",value:function(e,t){(e||t)&&J(new v.Vector3(5*t*this.velocity.z,5*e*this.velocity.z,0),new v.Vector3(0,0,-1),this.collision)}},{key:"propellerSpeedUpdate",value:function(){this.enginePowerPrev!==this.enginePower&&(this.enginePower?this.animationGroup.play(!0):this.animationGroup.play(!1),this.animationGroup.speedRatio=4*this.enginePower),this.enginePowerPrev=this.enginePower}},{key:"resetControls",value:function(){this.aileronControl(this.roll*Math.PI/8),this.rudderControl(-this.yaw*Math.PI/8),this.elevatorControl(-this.pitch*Math.PI/8),this.pitch=0,this.yaw=0,this.roll=0}},{key:"registerForces",value:function(){var e=this;this.scene.onBeforeRenderObservable.add((function(){e.applyRollForce(e.roll),e.applyPitchYawForce(e.pitch,e.yaw),e.applyDragForce(),e.applyLiftForce(),e.applyThrustForce(),e.propellerSpeedUpdate(),e.resetControls()}))}}]),e}();v.Mesh.prototype.getAbsoluteSize=function(){this.__size||(this.__size=v.Vector3.Zero());var e=this.scaling,t=this.getBoundingInfo();return this.__size.x=Math.abs(t.minimum.x-t.maximum.x)*e.x,this.__size.y=Math.abs(t.minimum.y-t.maximum.y)*e.y,this.__size.z=Math.abs(t.minimum.z-t.maximum.z)*e.z,this.__size};var X=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"cannon2babylonVec3",value:function(e){var t=new v.Vector3;return t.copyFromFloats(e.x,e.y,e.z),t}},{key:"cannon2babylonQuat",value:function(e){return new v.Quaternion(e.x,e.y,e.z,e.w)}},{key:"babylon2cannonVec3",value:function(e){return new g.Vec3(e.x,e.y,e.z)}},{key:"babylon2cannonQuat",value:function(e){return new g.Quaternion(e.x,e.y,e.z,e.w)}}]),e}(),$=function(){function e(t,i){Object(r.a)(this,e),this.scene=t,this.vehicle=null,this.chassisBody=null,this.carData=i,this.chassisMesh=i.chassisMesh,this.wheelMeshes=i.wheelsMesh,this.powerWheels=i.powerWheelsIndex,this.steeringwheels=i.steeringWheelsIndex,this.breakWheels=i.brakeWheelsIndex,this.carDataBody=i.chassisBody,this.carDataWheelBodies=i.wheelBodies,this.createVehicle()}return Object(c.a)(e,[{key:"createVehicle",value:function(){var e=this.scene.getPhysicsEngine().getPhysicsPlugin().world;console.log("rotations"),this.chassisBody=this.carDataBody;var t={radius:.3,directionLocal:new g.Vec3(0,-1,0),suspensionStiffness:150,suspensionRestLength:.25,frictionSlip:5,dampingRelaxation:2.3,dampingCompression:4.5,maxSuspensionForce:2e5,rollInfluence:.01,axleLocal:new g.Vec3(-1,0,0),chassisConnectionPointLocal:new g.Vec3(1,1,0),maxSuspensionTravel:.25,customSlidingRotationalSpeed:-30,useCustomSlidingRotationalSpeed:!0};this.vehicle=new g.RaycastVehicle({chassisBody:this.chassisBody,indexUpAxis:1,indexRightAxis:0,indexForwardAxis:2});var i=this;this.carData.wheels.forEach((function(e,n){t.radius=e.radius,t.chassisConnectionPointLocal.copy(X.babylon2cannonVec3(new v.Vector3(e.pos.x,e.pos.y,e.pos.z))),i.vehicle.addWheel(t)})),this.vehicle.addToWorld(e),this.scene.registerBeforeRender((function(){for(var e=0;e<i.vehicle.wheelInfos.length;e++){i.vehicle.updateWheelTransform(e);var t=i.vehicle.wheelInfos[e].worldTransform;i.wheelMeshes[e].position.copyFrom(X.cannon2babylonVec3(t.position)),i.wheelMeshes[e].rotationQuaternion.copyFrom(X.cannon2babylonQuat(t.quaternion))}}))}},{key:"forward",value:function(e){var t=this;this.powerWheels.forEach((function(i){return t.vehicle.applyEngineForce(-e,i)}))}},{key:"backward",value:function(e){var t=this;this.powerWheels.forEach((function(i){return t.vehicle.applyEngineForce(e,i)}))}},{key:"right",value:function(e){var t=this;this.steeringwheels.forEach((function(i){return t.vehicle.setSteeringValue(e,i)}))}},{key:"left",value:function(e){var t=this;this.steeringwheels.forEach((function(i){return t.vehicle.setSteeringValue(-e,i)}))}},{key:"brake",value:function(e){var t=this;this.breakWheels.forEach((function(i){return t.vehicle.setBrake(e,i)}))}},{key:"unbrake",value:function(){var e=this;this.breakWheels.forEach((function(t){return e.vehicle.setBrake(0,t)}))}}]),e}(),ee=function(){function e(){Object(r.a)(this,e),this.bluePrint=null,this.suspension=null,this.avionics=null,this.hud=null,this.clock=new p}return Object(c.a)(e,[{key:"position",get:function(){return this.bluePrint.chassisMesh.position},set:function(e){this.bluePrint.chassisMesh.setAbsolutePosition(e)}},{key:"ready",get:function(){return null!==this.suspension}},{key:"steer",value:function(t){switch(t){case e.DIR.UP:this.avionics.pitch=-1;break;case e.DIR.DOWN:this.avionics.pitch=1;break;case e.DIR.LEFT:this.avionics.yaw=-1,this.suspension.left(.5);break;case e.DIR.RIGHT:this.avionics.yaw=1,this.suspension.right(.5);break;case e.DIR.LEFT_RESET:this.suspension.left(0);break;case e.DIR.RIGHT_RESET:this.suspension.right(0);break;case e.DIR.LEFT_HOLD:this.avionics.yaw=-1;break;case e.DIR.RIGHT_HOLD:this.avionics.yaw=1;break;case e.DIR.TILT_LEFT:this.avionics.roll=-1;break;case e.DIR.TILT_RIGHT:this.avionics.roll=1;break;default:console.log("vehicle invalid direction")}}},{key:"power",value:function(t){switch(t){case e.DIR.POWER_UP:this.avionics.enginePower=this.avionics.enginePower+.005,this.avionics.speedModifier=.12;break;case e.DIR.POWER_DOWN:this.avionics.enginePower=this.avionics.enginePower-.005;break;default:console.log("vehicle invalid power")}}},{key:"brake",value:function(t){switch(t){case e.DIR.BRAKE:this.suspension.brake(5);break;case e.DIR.UNBRAKE:this.suspension.unbrake();break;default:console.log("vehicle invalid power")}}},{key:"update",value:function(){if(null!=this.avionics&&null!=this.hud){var e=this.clock.getElapsedTime();this.hud.setRotation(new v.Vector3(180+v.Tools.ToDegrees(this.avionics.rotation.y),-v.Tools.ToDegrees(this.avionics.rotation.x),v.Tools.ToDegrees(this.avionics.rotation.z))),this.hud.setSpeed(this.avionics.velocity.z),this.hud.setPower(this.avionics.enginePower),this.hud.setAltitude(this.avionics.collision.position.y),this.hud.update(e)}}}]),e}();function te(e){new v.EngineInstrumentation(e);var t=z.AdvancedDynamicTexture.CreateFullscreenUI("UI"),i=new z.StackPanel;t.addControl(i),i.verticalAlignment=z.Control.VERTICAL_ALIGNMENT_BOTTOM,i.horizontalAlignment=z.Control.HORIZONTAL_ALIGNMENT_RIGHT,i.isVertical=!0;var n=new z.TextBlock;return n.text="",n.color="white",n.fontSize=16,n.height="30px",i.addControl(n),{update:function(){n.text="FPS:"+e.getFps().toFixed()}}}ee.DIR={UP:1,DOWN:2,LEFT:3,RIGHT:4,TILT_LEFT:5,TILT_RIGHT:6,BRAKE:7,LEFT_RESET:8,RIGHT_RESET:9,POWER_UP:10,POWER_DOWN:11,LEFT_HOLD:12,RIGHT_HOLD:13,UNBRAKE:14};var ie=function e(t){Object(r.a)(this,e),this.scene=t,console.log(this.constructor.name),this.componentes=[]},ne=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,null)).object=new v.Scene(e),n}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){this.object.render()}},{key:"dispose",value:function(){}}]),i}(ie),oe=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;Object(r.a)(this,i),o=t.call(this,e);var a=new v.FollowCamera("followcamera",new v.Vector3(0,0,-100),e.object);return a.heightOffset=1,a.cameraAcceleration=.05,a.maxCameraSpeed=1800,a.inertia=20,a.radius=-5,a.attachControl(n,!1),e.object.activeCamera=a,o.object=a,o}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),ae=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;switch(Object(r.a)(this,i),(o=t.call(this,e)).type=n,n){case"Hemispheric":o.object=new v.HemisphericLight("ambient",new v.Vector3(-.7,.3,-.7),e.object);break;case"Point":o.object=new v.PointLight("light",new v.Vector3(0,1,0),e.object);break;case"Directional":o.object=new v.DirectionalLight("light",new v.Vector3(.7,-.3,.7),e.object);break;default:o.object=null}return o}return Object(c.a)(i,[{key:"init",value:function(){switch(this.type){case"Hemispheric":this.object.position=new v.Vector3(0,55,5),this.object.intensity=.8,this.object.diffuse=new v.Color3(.96,.97,.93),this.object.groundColor=new v.Color3(.1,.1,.1),this.object.setEnabled(!0);break;case"Point":this.object.intensity=.7,this.object.diffuse=v.Color3.FromHexString("#ff0000"),this.object.position.z=10,this.object.position.y=10;break;case"Directional":this.object.position=new v.Vector3(50,100,100),this.object.intensity=2.3,this.object.setEnabled(!0)}}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),se=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;Object(r.a)(this,i),n=t.call(this,e);var o=new v.Vector3(0,-9.81,0);return n.object=new v.CannonJSPlugin(!1,void 0,g),e.object.enablePhysics(o,n.object),e.object.physicsEnabled=!1,n}return Object(c.a)(i,[{key:"init",value:function(){this.object.setTimeStep(1/30)}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),re=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).object=v.MeshBuilder.CreateBox("",{size:1},e.object),n.object.position.y=80,n.mesh=n.object,n}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),ce=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;return Object(r.a)(this,i),(o=t.call(this,e)).object=new k(e.object,null,null,n.object,800),o}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),he=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).object=new j(e.object,800),n}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),le=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;Object(r.a)(this,i),o=t.call(this,e);for(var a=new v.SpriteManager("cloudsManager","http://www.babylonjs.com/Scenes/Clouds/cloud.png",1e3,256,e.object),s=0;s<100;s++){var c=new v.Sprite("clouds",a);c.position.x=Math.random()*n-n/2,c.position.y=150*Math.random()+150,c.position.z=Math.random()*n-n/2,c.size=60*Math.random()+50,0===Math.round(5*Math.random())&&(c.angle=90*Math.PI/180),0===Math.round(2*Math.random())&&(c.invertU=-1),0===Math.round(4*Math.random())&&(c.invertV=-1)}return o.object=a,o}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),ue=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;Object(r.a)(this,i),(n=t.call(this,e)).inputMap={};return["w","s","a","d","q","e","p","o","m","n","1","2","k","b","9","0","l"].forEach((function(e){return n.inputMap[e]={type:!1,keyState:"up"}})),n}return Object(c.a)(i,[{key:"keyAction",value:function(e,t){this.inputMap[e].type&&t()}},{key:"keyActionTrig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this.inputMap[e].type?"up"==this.inputMap[e].keyState?(this.inputMap[e].keyState="down",t()):(this.inputMap[e].keyState="hold",n()):"up"!=this.inputMap[e].keyState&&(this.inputMap[e].keyState="up",i())}},{key:"init",value:function(){var e=this;this.scene.object.actionManager=new v.ActionManager(this.scene.object),this.scene.object.actionManager.registerAction(new v.ExecuteCodeAction(v.ActionManager.OnKeyDownTrigger,(function(t){e.inputMap[t.sourceEvent.key]&&(e.inputMap[t.sourceEvent.key].type="keydown"===t.sourceEvent.type)}))),this.scene.object.actionManager.registerAction(new v.ExecuteCodeAction(v.ActionManager.OnKeyUpTrigger,(function(t){e.inputMap[t.sourceEvent.key]&&(e.inputMap[t.sourceEvent.key].type=!1)})))}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),de=function(){var e=Object(f.a)(d.a.mark((function e(t,i,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){v.SceneLoader.LoadAssetContainer(t,i,n,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}(),fe=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),n=t.call(this,e),Object(b.a)(n,Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de("/arfix/assets//","achil_2.glb",e.object);case 2:return n.assets=t.sent,n.assets.meshes[1].scaling=n.assets.meshes[1].scaling.multiplyByFloats(8,8,8),n.assets.meshes[1].position.y=-1.2,n.assets.meshes[1].receiveShadows=!0,n.shadowMesh=n.mesh=n.assets.meshes[1],t.abrupt("return",Object(w.a)(n));case 8:case"end":return t.stop()}}),t)})))())}return Object(c.a)(i,[{key:"init",value:function(){this.assets.addAllToScene()}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),ve=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;return Object(r.a)(this,i),(o=t.call(this,e)).object=new T(n.object),o}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),pe=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).object=null,Object(b.a)(n,Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de("/arfix/assets//","titan_parts_joined_uvmapped.glb",e.object);case 2:return n.assets=t.sent,t.abrupt("return",Object(w.a)(n));case 4:case"end":return t.stop()}}),t)})))())}return Object(c.a)(i,[{key:"init",value:function(){this.object=new I(this.scene.object,this.assets.meshes[0],{debug:!1}),this.assets.addAllToScene()}},{key:"update",value:function(){this.object.update()}},{key:"dispose",value:function(){}}]),i}(ie),ye=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).object=null,Object(b.a)(n,Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de("/arfix/assets//","nimitz_single_mesh.glb",e.object);case 2:return n.assets=t.sent,t.abrupt("return",Object(w.a)(n));case 4:case"end":return t.stop()}}),t)})))())}return Object(c.a)(i,[{key:"init",value:function(){this.object=new S(this.scene.object,this.assets.meshes[0]),this.assets.addAllToScene()}},{key:"update",value:function(){this.object.update()}},{key:"dispose",value:function(){}}]),i}(ie),be=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).object=null,n.mesh=null,Object(b.a)(n,Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de("/arfix/assets//","flying-gull.glb",e.object);case 2:return n.assets=t.sent,t.abrupt("return",Object(w.a)(n));case 4:case"end":return t.stop()}}),t)})))())}return Object(c.a)(i,[{key:"init",value:function(){var e=this.assets.meshes[1];e.scaling=new v.Vector3(.02,.02,.02),e.rotationQuaternion=new v.Vector3(0,-Math.PI/4,0).toQuaternion(),e.bakeCurrentTransformIntoVertices(),this.assets.addAllToScene();for(var t=[],i=0;i<19;i++){var n=e.createInstance("gull_"+i.toString());t.push(n)}t.push(e),this.object=new L(this.scene.object,t),this.mesh=t[0]}},{key:"update",value:function(){this.object.update()}},{key:"dispose",value:function(){}}]),i}(ie),we=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;return Object(r.a)(this,i),(o=t.call(this,e)).canvas=n,o.object=null,o.mesh=null,Object(b.a)(o,Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de("/arfix/assets//","airplane-ww2-collision-scaled.glb",e.object);case 2:return o.assets=t.sent,t.abrupt("return",Object(w.a)(o));case 4:case"end":return t.stop()}}),t)})))())}return Object(c.a)(i,[{key:"init",value:function(){this.object=new ee,this.object.bluePrint=new B(this.scene.object,this.assets.meshes,new v.Vector3(275,6.5,364),new v.Vector3(0,-Math.PI/2,0)),this.object.suspension=new $(this.scene.object,this.object.bluePrint),this.object.avionics=new Y(this.scene.object,this.object.bluePrint.chassisBody,this.object.bluePrint.controls),this.object.hud=new Z(this.scene.object,this.canvas),this.object.hud.linkWithMesh(this.object.bluePrint.chassisMesh),this.object.position=new v.Vector3(-10,5.7,-5),this.mesh=this.object.bluePrint.chassisMesh,this.shadowMesh=this.object.bluePrint.visualMeshes[0],this.assets.addAllToScene()}},{key:"update",value:function(){this.object.update()}},{key:"dispose",value:function(){}}]),i}(ie),ge=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n){var o;return Object(r.a)(this,i),(o=t.call(this,e)).object=new te(n),o}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){this.object.update()}},{key:"dispose",value:function(){}}]),i}(ie),me=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a;return Object(r.a)(this,i),(a=t.call(this,e)).shadows=n.object,a.casters=o,a}return Object(c.a)(i,[{key:"init",value:function(){var e=this;this.casters.forEach((function(t){e.shadows.addMesh(t.shadowMesh)}))}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),i}(ie),ke=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a;return Object(r.a)(this,i),(a=t.call(this,e)).keyboard=n,a.actors=o,a}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){var e=this;this.keyboard.keyActionTrig("o",(function(){return e.scene.object.debugLayer.show()})),this.keyboard.keyActionTrig("p",(function(){e.scene.object.physicsEnabled=!e.scene.object.physicsEnabled,e.actors.forEach((function(t){t.object.pause=e.scene.object.physicsEnabled}))}))}},{key:"dispose",value:function(){}}]),i}(ie),je=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o,a){var s;return Object(r.a)(this,i),(s=t.call(this,e)).keyboard=n,s.camera=o.object,s.actors=a,s.index=0,s}return Object(c.a)(i,[{key:"init",value:function(){this.camera.lockedTarget=this.actors[this.index++].mesh}},{key:"update",value:function(){var e=this;this.keyboard.keyActionTrig("l",(function(){e.camera.lockedTarget=e.actors[e.index++].mesh,e.index>=e.actors.length&&(e.index=0)}))}},{key:"dispose",value:function(){}}]),i}(ie),xe=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o,a,s){var c;return Object(r.a)(this,i),(c=t.call(this,e)).ref=o,c.keyboard=n,c.sun=a,c.ambient=s,c}return Object(c.a)(i,[{key:"setLightDirection",value:function(){var e=this.ref.object.getLightDirection();this.ambient.object.direction.copyFromFloats(e.x,e.y,e.z),this.sun.object.direction.copyFromFloats(-e.x,-e.y,-e.z),this.ambient.object.intensity=this.ref.object.convertRange(Math.abs(this.ref.object.getSkyMesh().material.inclination),[0,.5],[.8,.2]),this.sun.object.intensity=this.ref.object.convertRange(Math.abs(this.ref.object.getSkyMesh().material.inclination),[0,.5],[2.3,1.4])}},{key:"init",value:function(){this.ref.object.transitionSunInclination(.375),this.setLightDirection()}},{key:"update",value:function(){var e=this;this.keyboard.keyActionTrig("1",(function(){e.ref.object.transitionSunInclination(.025),e.setLightDirection()})),this.keyboard.keyActionTrig("2",(function(){e.ref.object.transitionSunInclination(-.025),e.setLightDirection()}))}},{key:"dispose",value:function(){}}]),i}(ie),Me=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a;return Object(r.a)(this,i),(a=t.call(this,e)).ref=o,a.keyboard=n,a}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){var e=this;this.keyboard.keyAction("q",(function(){return e.ref.object.steer(ee.DIR.TILT_LEFT)})),this.keyboard.keyAction("e",(function(){return e.ref.object.steer(ee.DIR.TILT_RIGHT)})),this.keyboard.keyAction("w",(function(){return e.ref.object.steer(ee.DIR.DOWN)})),this.keyboard.keyAction("s",(function(){return e.ref.object.steer(ee.DIR.UP)})),this.keyboard.keyActionTrig("d",(function(){return e.ref.object.steer(ee.DIR.LEFT)}),(function(){return e.ref.object.steer(ee.DIR.LEFT_RESET)}),(function(){return e.ref.object.steer(ee.DIR.LEFT_HOLD)})),this.keyboard.keyActionTrig("a",(function(){return e.ref.object.steer(ee.DIR.RIGHT)}),(function(){return e.ref.object.steer(ee.DIR.RIGHT_RESET)}),(function(){return e.ref.object.steer(ee.DIR.RIGHT_HOLD)})),this.keyboard.keyAction("m",(function(){return e.ref.object.power(ee.DIR.POWER_UP)})),this.keyboard.keyAction("n",(function(){return e.ref.object.power(ee.DIR.POWER_DOWN)})),this.keyboard.keyActionTrig("b",(function(){return e.ref.object.brake(ee.DIR.BRAKE)}),(function(){return e.ref.object.brake(ee.DIR.UNBRAKE)}),(function(){return e.ref.object.brake(ee.DIR.BRAKE)}))}},{key:"dispose",value:function(){}}]),i}(ie),Oe=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(e,n,o){var a;return Object(r.a)(this,i),(a=t.call(this,e)).airplane=n,a.birds=o,a}return Object(c.a)(i,[{key:"init",value:function(){}},{key:"update",value:function(){this.birds.object.enemyPosition=this.airplane.object.position}},{key:"dispose",value:function(){}}]),i}(ie);function Te(e){var t=new p,i=[],n=new v.Engine(e,!0,{preserveDrawingBuffer:!0,stencil:!0});return n.loadingUIText="Loading world and airplane...",n.loadingUIBackgroundColor="Purple",Object(f.a)(d.a.mark((function t(){var o,a,s,r,c,h,l,u,f,v,p,y,b,w,g,m,k,j,x,M,O,T,_;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("start"),o=new ne(n),a=new se(o),s=new ae(o,"Directional"),r=new ae(o,"Hemispheric"),c=new oe(o,e),h=new ce(o,c),l=new ve(o,s),u=new re(o),f=new le(o,800),v=new he(o),p=new ue(o),t.next=14,new fe(o);case 14:return y=t.sent,t.next=17,new ye(o);case 17:return b=t.sent,t.next=20,new pe(o);case 20:return w=t.sent,t.next=23,new be(o);case 23:return g=t.sent,t.next=26,new we(o,e);case 26:m=t.sent,k=new ge(o,n),j=new je(o,p,c,[m,g,u]),x=new me(o,l,[y,m]),M=new xe(o,p,h,s,r),O=new ke(o,p,[b,w,g]),T=new Me(o,p,m),_=new Oe(o,m,g),i.push(o),i.push(a),i.push(c),i.push(s),i.push(r),i.push(l),i.push(u),i.push(v),i.push(h),i.push(f),i.push(p),i.push(y),i.push(b),i.push(w),i.push(g),i.push(m),i.push(k),i.push(x),i.push(M),i.push(O),i.push(j),i.push(T),i.push(_),i.forEach((function(e){e.init()})),console.log("finished");case 59:case"end":return t.stop()}}),t)})))(),{onWindowResize:function(){n.resize()},animate:function(){n.runRenderLoop((function(){t.timeIntervalCheck(.025)&&i.forEach((function(e){e.update()}))}))}}}i(29);var _e=i(14),Se=function(e){Object(h.a)(i,e);var t=Object(l.a)(i);function i(){return Object(r.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"componentDidMount",value:function(){!function(e){var t=function(e,t){var i=e.createElement("canvas");return t.appendChild(i),i}(document,e);t.style.width="100%",t.style.height="100%",t.width=t.offsetWidth,t.height=t.offsetHeight;var i=new Te(t);function n(){t.style.width="100%",t.style.height="100%",t.width=t.offsetWidth,t.height=t.offsetHeight,Math.round(t.offsetWidth/2),Math.round(t.offsetHeight/2),i.onWindowResize()}window.onresize=n,n(),n(),i.animate()}(this.threeRootElement)}},{key:"render",value:function(){var e=this;return Object(_e.jsx)("div",{className:"viewer-viewer",ref:function(t){return e.threeRootElement=t}})}}]),i}(n.Component);var Ie=function(){return Object(_e.jsx)("div",{className:"App",children:Object(_e.jsx)(Se,{})})},Ve=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(t){var i=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;i(e),n(e),o(e),a(e),s(e)}))};s.a.render(Object(_e.jsx)(o.a.StrictMode,{children:Object(_e.jsx)(Ie,{})}),document.getElementById("root")),Ve()}},[[31,1,2]]]);
//# sourceMappingURL=main.396aa419.chunk.js.map